<div class="d-flex flex-column dfm-gap-24">
  <section class="content-section-1">
    <div class="d-flex dfm-gap-8 align-items-center dfm-text-primary ad-sf-title-buttons">
      <dfm-button color="link" size="lg" routerLink="/staff">{{ 'Staff' | translate }}</dfm-button>

      <div style="width: 16px; height: 16px" class="h-fit">
        <dfm-icon name="chevron-right"></dfm-icon>
      </div>

      <div class="d-flex align-items-center dfm-gap-8" *ngIf="comingFromRoute === 'view' && staffID">
        <dfm-button color="link" size="lg" [routerLink]="['../', 'view']">{{ 'View' | translate }}</dfm-button>

        <div style="width: 16px; height: 16px" class="h-fit">
          <dfm-icon name="chevron-right"></dfm-icon>
        </div>
      </div>

      <dfm-button color="link-gray" size="lg">{{ comingFromRoute ? ('Edit' | translate) : ('Add' | translate) }} </dfm-button>
    </div>

    <div class="dfm-gap-16 ad-sf-action-buttons">
      <dfm-button color="secondary" size="md" [routerLink]="[comingFromRoute === 'view' ? '../view' : '/staff']">
        {{ 'Cancel' | translate }}
      </dfm-button>
      <dfm-button [disabled]="(submitting$$ | async) === true" color="primary" size="md" class="text-nowrap" (click)="saveStaff()"
        >{{ comingFromRoute ? ('SaveChanges' | translate) : ('AddStaff' | translate) }}
      </dfm-button>
    </div>

    <!--  Mobile View  -->
    <div class="hidden dfm-gap-8 align-items-center ad-sf-title-buttons-mv">
      <div class="rounded-circle overflow-hidden">
        <dfm-button-icon color="tertiary-gray" size="sm" icon="chevron-left" [routerLink]="comingFromRoute === 'view' ? '../view' : '/staff'">
        </dfm-button-icon>
      </div>

      <dfm-button color="link" size="lg" routerLink="./"> {{ edit ? ('EditStaff' | translate) : ('AddStaff' | translate) }} </dfm-button>
    </div>
    <!--  **  -->
  </section>

  <section class="dfm-card ad-sf-section2 add-page-content-height position-relative">
    <dfm-mat-spinner></dfm-mat-spinner>

    <form [formGroup]="addStaffForm" class="dfm-p-16 d-flex flex-column dfm-gap-32">
      <div class="d-flex flex-column dfm-gap-16 ad-sf-form-general-info">
        <div class="d-flex dfm-gap-16 flex-wrap">
          <div>
            <dfm-input
              #firstname
              [dfmNameInput]="firstname"
              size="md"
              placeholder="{{ 'EnterFirstName' | translate }}"
              label="{{ 'FirstName' | translate }} *"
              formControlName="firstname"
            ></dfm-input>
            <div class="validation-error" *ngIf="addStaffForm.get('firstname')?.hasError('required') && addStaffForm.get('firstname')?.touched">
              {{ 'RequiredField' | translate }}
            </div>
          </div>
          <div>
            <dfm-input
              #lastname
              [dfmNameInput]="lastname"
              size="md"
              placeholder="{{ 'EnterLastName' | translate }}"
              label="{{ 'LastName' | translate }} *"
              formControlName="lastname"
            ></dfm-input>
            <div class="validation-error" *ngIf="addStaffForm.get('lastname')?.hasError('required') && addStaffForm.get('lastname')?.touched">
              {{ 'RequiredField' | translate }}
            </div>
          </div>
        </div>

        <div class="d-flex dfm-gap-16 flex-wrap">
          <div class="d-flex flex-column ad-sf-email">
            <dfm-input
              type="email"
              size="md"
              placeholder="{{ 'EnterEmail' | translate }}"
              label="{{ 'Email' | translate }} *"
              formControlName="email"
              class="flex-1"
              (focusout)="handleEmailInput($event)"
            ></dfm-input>
            <div class="validation-error" *ngIf="addStaffForm.get('email')?.hasError('required') && addStaffForm.get('email')?.touched">
              {{ 'RequiredField' | translate }}
            </div>
            <small *ngIf="addStaffForm.get('email')?.hasError('email')" class="validation-error">{{ 'InvalidEmail' | translate }} </small>
          </div>
          <div>

          <dfm-input
            #phone
            [dfmNumberInput]="phone"
            type="number"
            size="md"
            placeholder="{{ 'EnterTelephone' | translate }}"
            label="{{ 'Telephone' | translate }}"
            formControlName="telephone"
          ></dfm-input>
         
          </div>
        </div>

        <div *ngIf="staffTypes$$ | async as staffTypes" class="ad-sf-staff-dropdown">
          <div class="dfm-input-dropdown-wrapper">
            <dfm-input-dropdown
              #examsDropdown
              size="md"
              #dropdown
              placeholder="{{ 'SelectStaffType' | translate }}"
              label="{{ 'StaffType' | translate }}*"
              [items]="staffTypes"
              formControlName="userType"
            >
            </dfm-input-dropdown>
          </div>
          <div class="validation-error" *ngIf="addStaffForm.get('userType')?.hasError('required') && addStaffForm.get('userType')?.touched">
            {{ 'RequiredField' | translate }}
          </div>
        </div>

        <!-- <div *ngIf="exams$$ | async as exams"
             class="position-relative dfm-input-multi-dropdown-wrapper ad-sf-exam-dropdown">
          <dfm-input-dropdown
            #examsDropdown
            size="md"
            [multiple]="true"
            #dropdown
            [placeholder]="!!examsDropdown.value?.length ? examsDropdown.value.length + ' ' + ('Selected' | translate) : 'ExamInvolvingStaff'| translate"
            label="{{'Exams' | translate}}"
            [items]="exams"
            formControlName="examList"
          >
          </dfm-input-dropdown> -->
        <!--        <span *ngIf="!!examsDropdown.value?.length"-->
        <!--              class="studies-dropdown-text text-sm font-weight-medium text-center">-->
        <!--          {{ examsDropdown.value?.length }} Selected-->
        <!--        </span>-->
        <!-- </div> -->

        <dfm-text-area
          size="md"
          placeholder="{{ 'EnterInfo' | translate }}"
          label="{{ 'Info' | translate }}"
          class="ad-sf-info-input"
          formControlName="info"
        ></dfm-text-area>
      </div>

      <div class="d-flex flex-column dfm-gap-16">
        <div class="d-flex flex-column dfm-gap-8">
          <span class="text-md font-weight-semi-bold">{{ 'AddPracticeData' | translate }}</span>

          <div class="w-fit">
            <dfm-radio-button
              label="{{ 'Always' | translate }}"
              hint="{{ 'Openinghoursofthepractice' | translate }}"
              size="sm"
              [checkedValue]="false"
              formControlName="practiceAvailabilityToggle"
              (change)="handleRadioButtonChange(false)"
            ></dfm-radio-button>

            <dfm-radio-button
              label="{{ 'GetDetailed' | translate }}"
              hint="{{ 'OnlyForException' | translate }}"
              size="sm"
              formControlName="practiceAvailabilityToggle"
              [checkedValue]="true"
              (change)="handleRadioButtonChange(true)"
            ></dfm-radio-button>
          </div>
        </div>

        <ng-container *ngIf="formValues.practiceAvailabilityToggle">
          <dfm-time-slots
            [timeSlotData$$]="staffAvailabilityData$$"
            [emitEvents$$]="emitEvents$$"
            (formValuesEvent)="saveForm($event)"
          ></dfm-time-slots>
        </ng-container>
      </div>
    </form>
  </section>
</div>
