<div class="d-flex flex-column dfm-p-16 h-100">
	<section class="d-flex justify-content-between align-items-center dfm-gap-32 dfm-mb-16">
		<header class="d-flex align-items-center dfm-gap-8" *ngIf="filteredUpcommingAppointments$$ | async as upcomingAppointments">
			<div class="dfm-button-gray-400">
				<dfm-button size="md" leadingIcon="drag" color="link-gray"></dfm-button>
			</div>
			<span class="font-weight-medium">{{ 'UpcomingAppointmentsInFourHours' | translate }} ({{ upcomingAppointments.length }})</span>
		</header>

		<dfm-button-icon
			color="secondary"
			size="sm"
			icon="calendar-date"
			ngbPopover="{{ 'Calendar' | translate }}"
			triggers="mouseenter:mouseleave"
			popoverClass="popover-p-8"
			[openDelay]="200"
			(click)="redirectToCalender()"
		></dfm-button-icon>
	</section>

	<section *ngIf="filteredUpcommingAppointments$$ | async as upcomingAppointments" class="h-92">
		<div *ngIf="!noDataFound" class="d-flex flex-column dfm-gap-16 upcoming-events-container">
			<table>
				<thead class="text-xs">
					<th></th>
					<th>Time</th>
					<th>Avatar</th>
					<th>Patient</th>
					<th>Exam</th>
					<th>Room</th>
				</thead>
				<tbody>
					<tr *ngFor="let appointment of upcomingAppointments" class="position-relative text-xs">
						<div class="circle-icon"></div>
						<td>
							<span>{{ appointment?.exam?.startedAt | dfmDefaultDate : 'time' | dfmUtcToLocal : true }}</span>
						</td>
						<td>
							<div class="rounded-circle avatar-container">
								<div class="circle-gray-200-40 d-flex justify-content-center align-items-center">
									{{ appointment?.patientFname?.toString()[0].toUpperCase() }}
								</div>
							</div>
						</td>
						<td>
							<span class="font-weight-medium"> {{ appointment?.patientFname | titlecase }} {{ appointment?.patientLname | titlecase }} </span>
						</td>
						<td>
							<span class="font-weight-medium"> {{ appointment?.exam?.name | titlecase }}</span>
						</td>
						<td>
							<span class="font-weight-medium">{{ appointment.rooms | joinWithAnd : 'name' | dashIfNothing }}</span>
						</td>
					</tr>
				</tbody>
			</table>
<!--			<div class="d-flex flex-row  font-weight-bold">-->
<!--				<div class="time-title dfm-px-10 dfm-py-4"><small class="text-xs text-center ">Time</small></div>-->
<!--				<div class="avatar-title avatar-container"><small class="text-xs text-center">Avatar</small></div>-->
<!--				<div class="dfm-px-10 dfm-py-4 patient-title text-center mx-1"><small class="text-xs">Patient</small></div>-->
<!--				<div class="dfm-px-10 dfm-py-4 exam-title text-center mx-1"><small class="text-xs">Exam</small></div>-->
<!--				<div class="dfm-px-10 dfm-py-4 room-title text-center mx-1"><small class="text-xs">Room</small></div>-->
<!--			</div>-->
<!--			<div *ngFor="let appointment of upcomingAppointments" class="d-flex flex-row dfm-gap-8 position-relative">-->
<!--				<div class="circle-icon"></div>-->
<!--				<div class="d-flex flex-column justify-content-center dfm-bg-main-50 dfm-px-10 dfm-py-4 text-xs text-center rounded">-->
<!--					<ng-container class="font-weight-medium">-->
<!--						<span>{{ appointment?.exam?.startedAt | dfmDefaultDate : 'time' | dfmUtcToLocal : true }}</span>-->
<!--					</ng-container>-->
<!--				</div>-->
<!--				<div class="d-flex flex-row align-items-center">-->
<!--					<div class="rounded-circle avatar-container">-->
<!--						<div class="circle-gray-200-40 d-flex justify-content-center align-items-center">-->
<!--							{{ appointment?.patientFname?.toString()[0].toUpperCase() }}-->
<!--						</div>-->
<!--					</div>-->
<!--					<div class="d-flex flex-column dfm-px-10 dfm-py-4 text-xs patient-name mx-1">-->
<!--						<span class="font-weight-medium"> {{ appointment?.patientFname | titlecase }} {{ appointment?.patientLname | titlecase }} </span>-->
<!--					</div>-->
<!--					<div class="d-flex flex-column dfm-px-10 dfm-py-4 text-xs exam-name mx-1">-->
<!--						<span class="font-weight-medium"> {{ appointment?.exam?.name | titlecase }}</span>-->
<!--					</div>-->
<!--					<div class="d-flex flex-column dfm-px-10 dfm-py-4 text-xs room-name mx-1">-->
<!--						<span class="font-weight-medium" *ngFor="let room of appointment.rooms; let i = index">-->
<!--							{{ room?.name | titlecase }}{{ i < appointment.rooms.length ? ',' : '' }}-->
<!--						</span>-->
<!--					</div>-->
<!--				</div>-->
<!--			</div>-->
		</div>

		<div class="chart-wrapper align-self-center dfm-mb-16 no-data-found" *ngIf="noDataFound">
			<span class="dfm-text-main-400">{{ 'NoDataFound' | translate }}</span>
		</div>
	</section>
</div>
